
#### TL;Dr

> 1. **Поправка на непрерывность** — это способ улучшить точность при замене дискретного распределения непрерывным.  
> 2. **Суть**: в вероятностях вида $P(X \le k)$ вместо «границы» $k$ берут «полушаг» $k + 0.5$ для непрерывного распределения.  
> 3. **Применение**: особенно актуально для **биномиального** распределения при аппроксимации **нормальным** законом (теорема Мойвра–Лапласа), а также в некоторых других дискретно-непрерывных приближениях.  
> 4. **Практическое правило**: $P(X = k) \approx P(k-0.5 < Y \le k+0.5)$, $P(X \le k) \approx P\bigl(Y \le k+0.5\bigr)$, и т.д.  
> 5. **Влияние**: Поправка становится менее значимой при очень больших $n$ (тогда аппроксимация и без неё довольно точна).

## 1. Зачем нужна поправка на непрерывность?

Приближение дискретных распределений (например, биномиального) непрерывными (например, нормальным) приводит к определённым **ошибкам**, поскольку:

- Дискретная случайная величина принимает целые значения (или из некоторого дискретного набора).
- Непрерывное распределение «растянуто» на всю действительную прямую и не имеет точек «скачка».

Чтобы **уменьшить** эту погрешность, вводят **поправку на непрерывность** (continuity correction). Идея в том, чтобы **учитывать** границы между целыми значениями при переводе вероятностных событий из дискретной модели в непрерывную.

## 2. Пример: Приближение биномиальной случайной величины нормальной

Рассмотрим биномиальную случайную величину 
$$
X \sim \mathrm{Bin}(n,p),
$$
которая принимает целые значения $k = 0,1,2,\dots,n$. При больших $n$ (и умеренном $p$) $X$ можно аппроксимировать нормальной случайной величиной 
$$
Y \sim \mathcal{N}\bigl(\mu = np,\;\sigma^2 = np(1-p)\bigr).
$$
Однако, если мы просто подставим:
$$
P(X \le k) \approx P(Y \le k),
$$
то возникнет **систематическая ошибка** из-за того, что $X$ — дискретна, а $Y$ — непрерывна.

### 2.1. Поправка при $P(X \le k)$

В биномиальном случае событие $X \le k$ означает, что $X$ может быть любым из целых значений $0,1,\dots,k$.  
Но в непрерывном случае (для $Y$) мы считаем событие $Y \le k$ — это всё, что меньше или равно $k$.  

Чтобы «учесть» всю дискретную природу, **граница** между $k$ и $k+1$ на оси $X$ соответствует «точке» $k + 0.5$ на оси $Y$. То есть:

$$
P(X \le k) \;\approx\; P\bigl(Y \le k + 0.5\bigr).
$$

Таким образом, **поправка на 0.5** (а точнее на полединицы, когда шаг дискретности равен 1) помогает согласовать два разных типа шкал.

### 2.2. Поправка при $P(X = k)$

Чтобы найти вероятность, что $X$ принимает **ровно** значение $k$ (дискретный случай), в непрерывном приближении рассматривают «интервал» от $k - 0.5$ до $k + 0.5$. Тогда:

$$
P(X = k) \;\approx\; P\bigl(k - 0.5 < Y \le k + 0.5\bigr).
$$

Если бы мы взяли точку $k$ без «полушага», то фактически мы бы искали вероятность того, что $Y$ равен ровно $k$, а в непрерывном случае это вероятность 0.

### 2.3. Поправка при $P(a \le X \le b)$

Для более общего события, например, 
$$
P(a \le X \le b),
$$
где $a$ и $b$ — целые числа (или округлённые до ближайшего целого), используют схему:

$$
P(a \le X \le b) \;\approx\; P\bigl(a - 0.5 < Y \le b + 0.5\bigr).
$$

Здесь каждая граница «сдвигается» на 0.5 (или половину шага дискретности).

## 3. Пример вычислений

Допустим, $X \sim \mathrm{Bin}(n,p)$, а мы хотим найти $P(X \le k)$. В нормальной аппроксимации $Y \sim \mathcal{N}(np,\;np(1-p))$. Без поправки:

$$
P(X \le k) \approx P(Y \le k).
$$

С поправкой на непрерывность:

$$
P(X \le k) \approx P\bigl(Y \le k + 0.5\bigr).
$$

Второй вариант даёт **более точные** результаты, особенно если $n$ не слишком велико.

## 4. Когда нужна поправка, а когда можно пренебречь?

- **Поправка на непрерывность** важна, когда $n$ не слишком большое и/или мы рассматриваем события в «центре» распределения (где малые изменения аргумента могут заметно влиять на результат).
- Если $n$ действительно велико (сотни или тысячи), и $p$ не близко к 0 или 1, то биномиальная кривая становится «плавной», и разница в 0.5 почти не влияет на итоги. Тогда поправку можно опустить, не теряя точности.

## 5. Обобщение: дискретное vs. непрерывное

Идея поправки на непрерывность возникает **всегда**, когда мы аппроксимируем **дискретное** распределение (например, биномиальное, распределение Пуассона) **непрерывным** (например, нормальным, гамма-распределением и т.д.). Самая распространённая ситуация — это:

1. **Биномиальное** $\to$ **Нормальное** (при больших $n$).  
2. **Биномиальное** $\to$ **Пуассоновское** (при больших $n$, малом $p$) — хотя здесь чаще всего не говорят про «поправку», поскольку пуассоновское распределение тоже дискретное, но, если бы мы приближали дальше к непрерывному (например, нормальному), аналогичная идея может возникнуть.
